"use strict";(()=>{var e={};e.id=762,e.ids=[762],e.modules={1185:e=>{e.exports=require("mongoose")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},1309:(e,t,a)=>{a.r(t),a.d(t,{config:()=>p,default:()=>m,routeModule:()=>f});var r={};a.r(r),a.d(r,{default:()=>handler});var s=a(1802),n=a(7153),o=a(6249),l=a(1924),i=a(1185),d=a.n(i);let u=new(d()).Schema({name:{type:String,required:!0},mobile:{type:String,required:!0},email:{type:String},isAvailable:{type:Boolean,default:!0},assignedArea:{type:String,required:!0},rating:{type:Number,default:5,min:1,max:5},totalWashes:{type:Number,default:0},joinedDate:{type:Date,default:Date.now},dailyEarnings:{type:Number,default:0},monthlyEarnings:{type:Number,default:0},createdAt:{type:Date,default:Date.now}}),c=d().models.Washer||d().model("Washer",u);async function handler(e,t){await (0,l.Z)();let{method:a}=e;switch(a){case"GET":try{let e=await c.find({}).sort({createdAt:-1});t.status(200).json({success:!0,data:e})}catch(e){console.error("GET washers error:",e),t.status(400).json({success:!1,error:e.message})}break;case"POST":try{let a=await c.create(e.body);t.status(201).json({success:!0,data:a})}catch(e){console.error("POST washer error:",e),t.status(400).json({success:!1,error:e.message})}break;default:t.status(405).json({success:!1,error:"Method not allowed"})}}let m=(0,o.l)(r,"default"),p=(0,o.l)(r,"config"),f=new s.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/washers",pathname:"/api/washers",bundlePath:"",filename:""},userland:r})},1924:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(1185),s=a.n(r);let n=process.env.MONGODB_URI||"mongodb://localhost:27017/washify";if(!n)throw Error("Please define the MONGODB_URI environment variable");let o=global.mongoose;async function dbConnect(){if(o.conn)return o.conn;o.promise||(o.promise=s().connect(n,{bufferCommands:!1}).then(e=>e));try{o.conn=await o.promise}catch(e){throw o.promise=null,e}return o.conn}o||(o=global.mongoose={conn:null,promise:null});let l=dbConnect}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[222],()=>__webpack_exec__(1309));module.exports=a})();